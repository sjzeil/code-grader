# code-grader

This project is the long-overdue replacement for the automatic grading script (in Perl) that I have been using for over 25 years.

## Goals

Goals include

* Ease of use
* Support for arbitrary programming languages
* Test oracle (evaluation of pass/fail) based on any of
    * pre-supplied expected output files
    * comparison of output against execution of a "gold version" of the code, supplied by the instructor
    * arbitrary instructor-supplied scripts
* Flexible grading schemes, including partial credit for common mistakes such as upper/lower-case mistakes and misspelled words in boilerplate text.
* Student grade reports written to spreadsheets, so that  instructors can compute overall scores in any way that they desire.
* Easy integration with GitHub Classroom or other use of GitHub to support student submissions.

## Status

Still at the early conceptual stage.

Eventually will be implemented in Prolog, but am currently prototyping components with shell scripts.


# Overview

## Inputs 

There are 4 critical file directories:


1. The _Release_ directory: Files provided to students by the instructor and that need to be present in order to build the student's program, but that should not have been changed by the student. Files from this  directory will be copied into the work area along with the student code, potentially overwriting student changes.

2. The _Gold_ directory (optional): Contains the instructor's solution to the assignment. This may be the same as the _release_ directory by listing files that should not overwrite student's submissions.

3. A student's _Submission_ directory: contains all of a student's code. May also contain copies of files from the _release_. Typically this directory will be a local clone of a student's git repository.


4. The _Test_ directory: Contains files that define how the project is to be built and tested.


## The Grading Model

1. Setup

    The contents of the Release directory, excluding selected files, are copied to the Submission directory.
2. Build
    1. If a Gold directory has been provided, the program in it is built.
    2. The student's program in the Submission directory is built.
3. Tests
    
    Each test case in the Test directory is run and scored.
4. Reporting

    Build and test results are assembled into a spreadsheet, which
    is deposited in the Submission directory

## Running and scoring tests

* Within the Test directory, each subdirectory represents a test case.
* Each test case can specify 
    1. the program to be run, 
    2. the command-line parameters to supply to that program, 
    3. the input to be supplied to the program's standard in
    4. whether to include the program's standard err in the captured output
    5. the expected output 
        * When a Gold program has been provided, this is generated by running the Gold program instead.
    6. A time limit, after which it should be assumed that the program is caught in an infinite loop
        * When a Gold program has been provided, this is generated by running the Gold program instead and timing it. 
    7. Scoring options: a list of 
         a. a filter to apply to the captured and expected outputs
         b. the oracle (pass/fail determination) to be employed
         c. % score (0..100) awarded

        For example, an instructor might specify a null (pass-thru) filter that leaves the outputs unchanged for 100 pct, a filter that ignores all whitespace for 95%,
        a filter that ignores whitespace and upper/lower-case for 90%, and a filter that ignores everything that is not a number for 75%.

* Defaults can be provided for each of the test case items listed above. Such defaults will be applied to all test cases.

    For example, consider a simple assignment where the students' programs read a single file or read standard in and produce output on standard output, that should match the output of the instructor's gold version.  This might have test cases that simply consist of one directory per test case, each directory containing only one file, the input to be supplied to the program.

